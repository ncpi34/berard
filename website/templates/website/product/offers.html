{% extends "website/base.html" %}


{% block navbar %}
{% include "website/topnavbar.html"  %}
{% endblock %}

{% block content %}
    {% include 'website/modals/display_picture.html' %}
    {% include 'helpers/cart_button.html' %}
    {% load static %}
    <!--Main layout-->
    <main class="container mx-auto mt-5" style="min-height: 83vh;">
        {% if articles %}
        <section class=" mb-4">
               <!--Grid row-->
               <div class="row justify-content-center wow fadeIn ">
                  <!-- <div class="row wow fadeIn no-gutters"> -->
                     {% for article in articles %}
                 <!--Grid column-->
                 <div class="articles col-lg-3 col-md-3  col-sm-6 mb-3">
       
                   <!--Card-->
       
                   <div class="card medium" style="margin: -2%">
                   
                     <!--Card content-->
                     <div class="card-body text-center">
       
                       <!--Code & title-->
                       <a href="{{article.article.get_absolute_url}}">
                         <h6>{{ article.article.code_article }}</h6>
                         <h6>{{ article.libelle|title }}</h6>
                       </a>
                       <!--Code & title-->
       
                       <!--Img-->  
                       <a  href="#menu-modal" class="modal-trigger pic_button" id="{{ article.article.get_img }}"  >
                               <img class="rounded  w-50  img_modal img-fluid ml-auto mr-auto card-img-top"
                                    alt="photo" style="width: 34%;height: 6vw;object-fit: scale-down;"
                               src="{{ article.article.get_img }}"/>
                       </a>
                       <!--Img-->
       
                       <!--Gencod-->
                         <a href="{{article.article.get_absolute_url}}">
                           <p style="font-size: 12px">{{ article.article.gencode }}</p>
                         </a>
                       <!--Gencod-->
       
                       <!--Form-->  
                         <form action="{% url 'cart:cart_add' product_id=article.article.id %}" method="post"
                           class="d-flex justify-content-left small" style="margin-bottom: -20px">
                            {% csrf_token %}
                            <div class="row">
                              <div class="col">
                               Qté: {{ form }}
                              </div>
                              <div class="col">
                               <button class="form-control btn btn-success btn_send" type="submit">
                                 <i class="fas fa-cart-plus"></i>
                             </button>
                              </div>
                            </div>
                         </form>
                       <!--Form-->    
                     <div class="row d-flex justify-content-center">
                       <!--Hidden Group-->
                       <input type="hidden" class="hidden_groups" value="{{ article.groupe }}"/>
                       <!--Hidden Group-->
                       <div class="col">
                         <h6>
                           <label>UV: </label>
                           <strong class='product_multiples' >
                             {% if article.article.conditionnement is None%}
                              /
                             {% else %}
                             {{ article.article.conditionnement }}
                         {% endif %}
                           </strong>
                       </h6>
                       </div>
                       <!--Col-->
                       <div class="col">
                        <h6>
                          <span class="badge badge-info" style="font-size: 18px;">
                            {% load website_extras %}
                              {{ request.session.tarif|without_taxes:article.article }}€
                          </span>
                        </h6>
                        <label>TVA {{ article.article.format_VAT }} %</label>
                       </div>
                     
                     </div>
                     <!--Col-->
                     </div>
                     <!--Row-->
                     
                       
                     
                     <!--Card content-->
       
                   </div>
                   <!--Card-->
       
                 </div>
                 <!--Fourth column-->
                     {% endfor %}
       
               </div>
               <!--Grid row-->
             </section>
             <!--Section: Products v.3-->

        {% else %}
            <div class="container text-center" style="min-height: 80vh;">
                <div class="mt-5 font-weight-bold">
                    <h2 class="mb-5">Opportunités</h2>
                    <h4 class="">Pas d'offres promotionnelles pour le moment ...</h4>
                </div>
            </div>
        {% endif %}
    </div>
   <!-- Pagination-->
  {% if is_paginated %}
    <div class="pagination justify-content-end mr-5">
           {% if page_obj.has_previous %}
               <a href="?page={{ page_obj.previous_page_number }}">
               <button class="btn btn-success waves-effect">
                   <i class="material-icons">chevron_left</i>
               </button>
               </a>
           {% endif %}
            <p class="mt-3">Page {{ page_obj.number }} sur {{ page_obj.paginator.num_pages }}</p>
           {% if page_obj.has_next %}
              <a href="?page={{ page_obj.next_page_number }}">
                <button class="btn btn-success waves-effect">
                   <i class="material-icons">chevron_right</i>
               </button>
           </a>
           {% endif %}
    </div>
{% endif %}
  </main>
{% endblock content %}

{% block extrascripts %}
<script src="{% static 'js/modalPicture.js'%}"></script>
<script src="{% static 'js/scroll_position_send_to_cart.js'%}"></script>
{% endblock extrascripts %}