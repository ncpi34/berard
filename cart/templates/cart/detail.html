{% extends 'website/base.html' %}
{% load static %}

{% block title %}
    Panier
{% endblock %}

{% block content %}
    <main>
    <div class="container">

    <div class="table-responsive text-nowrap">
    <h2>Order Summary</h2>
    <table class="table">
        <thead>
        <tr>
            <th scope="col">#</th>
            <th scope="col">Item title</th>
{#            <th scope="col">Price</th>#}
            <th scope="col">Quantity</th>
            <th scope="col">Remove</th>
            <th scope="col">Unit Price</th>
            <th scope="col">Total Item Price</th>
        </tr>
        </thead>
        <tbody>
        {% for order_item in cart%}
            {% with product=order_item.product %}
        <tr>
            <th scope="row">{{ forloop.counter }}</th>
                <td>
                    <a href="{{ product.get_absolute_url }}">
                        <img src="https://mdbootstrap.com/img/Photos/Horizontal/E-commerce/Vertical/13.jpg"/>
                    </a>
                </td>
            <td>{{ order_item.libelle }}</td>
            <td>
            <form action="{% url 'cart:cart_add' product.id %}" method="post">
                {{ order_item.update_quantity_form.quantity }}
                {{ order_item.update_quantity_form.update }}
                <input type="submit" class="btn btn-success" value="Ok"/>
                {% csrf_token %}
            </form>
            </td>
            <td>
                <a href="{% url 'cart:cart_remove' product.id %}"
                   class="btn btn-danger"
                >Supprimer</a>
{#                <a href="{% url 'cart:cart_remove' product.id %}"><i class="fas fa-minus mr-2"></i></a>#}
{#                {{ order_item.quantity }}#}
{#                <a href="{% url 'cart:cart_add' product.id %}"><i class="fas fa-plus ml-2"></i></a>#}
            </td>
            <td class="num">{{ order_item.pix_achat }}</td>
            <td class="num">{{ order_item.total_price }}</td>
            {% endwith %}
            {% endfor %}

        </tr>

        <tr class="total">
            <td>Total</td>
            <td colspan='4'></td>
            <td class="num">{{ cart.get_total_price}}</td>
        </tr>
        </tbody>
    </table>

    <p class="text-right">
        <a href="{% url 'website:products' %}" class="button light">Continue shopping</a>
        <a href="#" class="button light">Checkout</a>
    </p>
    </div>
    </div>
  </main>
{% endblock %}